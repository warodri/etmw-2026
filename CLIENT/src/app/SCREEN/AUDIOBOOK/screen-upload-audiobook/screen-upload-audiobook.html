@let myUserObj = myUser();
@let referralCodeObj = referralCode();

<div class="container">

    @if (!myUserObj) {

        <div class="col-12 col-md-7 col-lg-7 mx-auto px-3 px-md-0">
            <app-mobile-header></app-mobile-header>
            <div class="p-3">
                <h3>{{ tr('Nice to see you here', 'Qu√© bueno verte por aqu√≠') }}</h3>
                <div class="mt-3">
                    {{ tr('You need to be logged in to continue', 'Necesitas iniciar sesi√≥n para continuar') }}
                </div>
            </div>
            <app-mobile-footer></app-mobile-footer>
        </div>

    } @else {

        <div class="col-12 col-md-7 col-lg-7 mx-auto px-3 px-md-0">
            <!-- Header -->
            <div class="etmw-bg-lighter rounded-bottom-xl px-4 pt-3 pb-4 sticky-top" style="top: 0; z-index: 100;">
                <div class="d-flex justify-content-between align-items-center gap-3">
                    <button class="btn btn-link text-white p-0" (click)="goBack()">
                        <i class="bi bi-chevron-left" style="font-size: 1.5rem;"></i>
                    </button>
                    <h3 class="fw-bold m-0 flex-grow-1 text-center">
                        {{ tr('Upload Your Book', 'Sube Tu Libro') }}
                    </h3>
                    <div style="width: 32px;"></div>
                </div>
                <!-- 
                    Progress Steps 
                -->
                <div class="d-flex justify-content-between align-items-center mt-4 position-relative">
                    <!-- 
                        Progress line 
                    -->
                    <div class="position-absolute top-50 start-0 end-0 translate-middle-y" style="height: 2px; background-color: rgba(255, 255, 255, 0.1); z-index: 0;">
                        <div class="h-100 bg-primary" [style.width.%]="getProgressPercent()" style="transition: width 0.3s ease;"></div>
                    </div>
                    @for (step of steps; track step.number; let idx = $index) {
                        <div class="text-center position-relative" style="z-index: 1;">
                            <div class="rounded-circle mx-auto mb-2 d-flex align-items-center justify-content-center fw-bold"
                                 [class.bg-primary]="currentStep() >= step.number"
                                 [class.bg-secondary]="currentStep() < step.number"
                                 style="width: 40px; height: 40px; border: 3px solid var(--color-bg-main);">
                                @if (currentStep() > step.number) {
                                    <i class="bi bi-check-lg"></i>
                                } @else {
                                    {{ step.number }}
                                }
                            </div>
                            <div class="small" [class.text-primary]="currentStep() === step.number" [class.text-gray-400]="currentStep() !== step.number">
                                {{ trStep(step.label) }}
                            </div>
                        </div>
                    }
                </div>
            </div>
        
            @if (showInstructionsStep1()) {
                <div class="px-5 pt-4 pb-3 text-center">
                    <div class="etmw-bg-lighter rounded-4 px-4 pt-3 pb-3 lh-175 position-relative">
                        <div class="position-absolute bg-secondary text-light rounded-circle pointer" style="right:-15px; top:-9px; width:30px; height:30px;" (click)="closeInstructionsStep1()">
                            <i class="bi bi-x-lg"></i>
                        </div>
                        {{ tr('Upload your book, essay, or paper.', 'Sube tu libro, ensayo o art√≠culo.') }}
                        {{ tr('We turn it into an audiobook and publish it on Enter To My World.', 'Lo convertimos en audiolibro y lo publicamos en Enter To My World.') }}
                        {{ tr('Subscribers listen to your work, and you get paid every month.', 'Los suscriptores escuchan tu obra y t√∫ cobras cada mes.') }}
                    </div>
                </div>
            }
            
            <div class="px-4 pb-5">
        
                <!-- STEP 1: PRICING & REFERRAL -->
                @if (currentStep() === 1) {
                    <div class="mt-4 fade-in-up">
                        
                        @if (!showPricingOptions()) {
                            <!-- 
                                Free with Referral Card 
                            -->
                            <div class="bg-slate-800 rounded-4 p-4 mb-4 border border-2"
                                style="border-color: var(--color-primary) !important; background: linear-gradient(135deg, rgba(37, 99, 235, 0.1) 0%, rgba(37, 99, 235, 0.05) 100%);">
                                <div class="text-center mb-3">
                                    <div style="font-size: 3rem;">üéâ</div>
                                    <h5 class="fw-bold mb-2">{{ tr('Upload for FREE', 'Sube GRATIS') }}</h5>
                                    <p class="text-gray-400 mb-3">
                                        {{ tr('Have a referral code from our partners?', '¬øTienes un c√≥digo de referido de nuestros socios?') }} <br>
                                        {{ tr('Upload your book at no cost!', '¬°Sube tu libro sin costo!') }}
                                    </p>
                                </div>
                                <!-- 
                                    Referral code input 
                                -->
                                <div class="mb-3">
                                    <div class="d-flex gap-2">
                                        <input type="text"  class="contact-input flex-grow-1" [placeholder]="tr('Enter your code...', 'Ingresa tu c√≥digo...')" [(ngModel)]="referralCode" />
                                        <button class="btn btn-primary rounded-pill px-4" [disabled]="!referralCode()" (click)="applyReferralCode()">
                                            {{ tr('Apply', 'Aplicar') }}
                                        </button>
                                    </div>
                                    @if (referralChecked() && referralCodeObj) {
                                        @if (referralValid() === true) {
                                            <div class="small text-success p-2">
                                                <i class="bi bi-check-circle-fill"></i> &nbsp;{{ tr('Code validated! Your upload is FREE.', '¬°C√≥digo validado! Tu carga es GRATIS.') }}
                                            </div>
                                        } @else if (referralValid() === false) {
                                            <div class="small text-danger p-2">
                                                <i class="bi bi-x-circle-fill"></i> &nbsp;{{ tr('Invalid code. Please try again.', 'C√≥digo inv√°lido. Int√©ntalo de nuevo.') }}
                                            </div>
                                        }
                                    }
                                </div>
                                <!-- 
                                    Partners button 
                                -->
                                <div class="pt-2 text-center">
                                    <button class="btn btn-secondary rounded-pill px-4" (click)="showPartners()">
                                        <i class="bi bi-building"></i> {{ tr('View Our Partners', 'Ver Nuestros Socios') }}
                                    </button>
                                </div>
                                <div class="pt-2 small text-gray-400 text-center">
                                    {{ tr('Max amount of pages: 250', 'Cantidad m√°xima de p√°ginas: 250') }}
                                </div>
                            </div>
                            <!--
                                No referral
                            -->
                            <div class="pt-3 mb-5 text-center">
                                <button class="btn btn-lg btn-secondary rounded-4 px-4 pt-3 pb-3" (click)="dontHaveReferralCodeSelected()">
                                    ‚ùå &nbsp;{{ tr("I don't have a referral code", 'No tengo c√≥digo de referido') }}
                                </button>
                            </div>
                        }
        
                        <!-- 
                            Standard Pricing 
                        -->
                        @if (showPricingOptions()) {
                            <div class="bg-secondary rounded-4 p-4">
                                <h5 class="fw-bold mb-3">
                                    {{ tr('Standard Pricing', 'Precios Est√°ndar') }}
                                </h5>                        
                                <!-- 
                                    Pricing tiers 
                                -->
                                <div class="row g-3 mb-4">
                                    @for (item of standardPricing; track item) {
                                        <div class="col-6 pointer" (click)="selectUploadBasePrice(item)">
                                            <div class="bg-slate-800 rounded-4 p-3 text-center">
                                                <div class="small text-gray-400 mb-1">
                                                    {{ item.label }}
                                                </div>
                                                <div class="text-primary fw-bold text-2xl">
                                                    @if (regionDetected() == 'latam') {
                                                        {{ selectedCurrency() }}{{ item.latam }}
                                                    } @else if (regionDetected() == 'us') {
                                                        {{ selectedCurrency() }}{{ item.us }}
                                                    } @else if (regionDetected() == 'uk') {
                                                        {{ selectedCurrency() }}{{ item.us }}
                                                    } @else {
                                                        {{ selectedCurrency() }}{{ item.global }}
                                                    }
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>
                                <div class="small text-gray-400 text-center">
                                    <i class="bi bi-info-circle"></i> &nbsp;{{ tr('Pricing includes professional voice, curated expressions and quality control', 'El precio incluye voz profesional, expresiones curadas y control de calidad') }}
                                </div>
                            </div>
                        }
                        <div class="text-center mt-4">
                            <button class="btn btn-primary btn-lg rounded-pill px-5" (click)="nextStep()">
                                {{ tr('Continue', 'Continuar') }} <i class="bi bi-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                }
        
                <!-- STEP 2: UPLOAD METHOD -->
                @if (currentStep() === 2) {
                    <div class="mt-4 fade-in-up">
                        <h5 class="fw-bold mb-4">
                            {{ tr('How would you like to submit your book?', '¬øC√≥mo te gustar√≠a enviar tu libro?') }}
                        </h5>
                        <!-- 
                            Digital Upload Option 
                        -->
                        <div class="bg-secondary rounded-4 p-4 mb-3 pointer"
                             [class.border]="uploadMethod === 'digital'"
                             [class.border-primary]="uploadMethod === 'digital'"
                             [class.border-2]="uploadMethod === 'digital'"
                             (click)="selectUploadMethod('digital')">
                            <div class="d-flex align-items-center gap-3">
                                <div class="rounded-3 p-3 flex-shrink-0" [class.bg-primary]="uploadMethod === 'digital'" [class.bg-slate-800]="uploadMethod !== 'digital'">
                                    <i class="bi bi-cloud-upload-fill" style="font-size: 2rem;"></i>
                                </div>
                                <div class="flex-grow-1">
                                    <h6 class="fw-bold mb-1">{{ tr('Digital Upload', 'Carga Digital') }}</h6>
                                    <p class="small text-gray-400 mb-0">
                                        {{ tr('Upload PDF or TXT file directly (Fastest option)', 'Sube un archivo PDF o TXT directamente (Opci√≥n m√°s r√°pida)') }}
                                    </p>
                                </div>
                                @if (uploadMethod === 'digital') {
                                    <i class="bi bi-check-circle-fill text-primary" style="font-size: 1.5rem;"></i>
                                }
                            </div>
                        </div>
        
                        <!-- 
                            Physical Mail Option 
                        -->
                        <div class="bg-secondary rounded-4 p-4 mb-3 pointer"
                             [class.border]="uploadMethod === 'mail'"
                             [class.border-primary]="uploadMethod === 'mail'"
                             [class.border-2]="uploadMethod === 'mail'"
                             (click)="selectUploadMethod('mail')">
                            <div class="d-flex align-items-center gap-3">
                                <div class="rounded-3 p-3 flex-shrink-0" [class.bg-primary]="uploadMethod === 'mail'" [class.bg-slate-800]="uploadMethod !== 'mail'">
                                    <i class="bi bi-mailbox" style="font-size: 2rem;"></i>
                                </div>
                                <div class="flex-grow-1">
                                    <h6 class="fw-bold mb-1">{{ tr('Mail Physical Copy', 'Enviar Copia F√≠sica') }}</h6>
                                    <p class="small text-gray-400 mb-0">
                                        {{ tr('Send your book via mail (Argentina & UK only)', 'Env√≠a tu libro por correo (solo Argentina y Reino Unido)') }}
                                    </p>
                                </div>
                                @if (uploadMethod === 'mail') {
                                    <i class="bi bi-check-circle-fill text-primary" style="font-size: 1.5rem;"></i>
                                }
                            </div>
                        </div>
        
                        <!-- 
                            Mail addresses (if mail selected) 
                        -->
                        @if (uploadMethod === 'mail') {
                            <div class="bg-slate-800 rounded-4 p-4 mb-3">
                                @if(!showMailingAddress()) {
                                    <div class="text-center">
                                        {{ tr('Sorry. Mailing physical copies is not enabled right now.', 'Lo sentimos. El env√≠o de copias f√≠sicas no est√° habilitado por ahora.') }}
                                    </div>
                                } @else {
    
                                    <h3 class="fw-bold mb-3">
                                        {{ tr('Mailing Addresses', 'Direcciones de Env√≠o') }}
                                    </h3>
                                    
                                    <div class="mb-3">
                                        <div class="d-flex align-items-start gap-2 mb-2">
                                            <span class="rounded-3 bg-primary px-2 py-1">
                                                üá¶üá∑ Argentina
                                            </span>
                                        </div>
                                        <div class="mt-3 bg-secondary rounded-3 p-3">
                                            <div class="small">
                                                <strong>
                                                    {{ sendBookAddress.ARGENTINA.name }}
                                                </strong><br>
                                                {{ sendBookAddress.ARGENTINA.address }}<br>
                                                {{ sendBookAddress.ARGENTINA.postcode }}<br>
                                                {{ sendBookAddress.ARGENTINA.country }}
                                            </div>
                                        </div>
                                    </div>
            
                                    <div>
                                        <div class="d-flex align-items-start gap-2 mb-2">
                                            <span class="rounded-3 bg-primary px-2 py-1">
                                                üá¨üáß United Kingdom
                                            </span>
                                        </div>
                                        <div class="mt-3 bg-secondary rounded-3 p-3">
                                            <div class="small">
                                                <strong>
                                                    {{ sendBookAddress.UK.name }}
                                                </strong><br>
                                                {{ sendBookAddress.UK.address }}<br>
                                                {{ sendBookAddress.UK.postcode }}<br>
                                                {{ sendBookAddress.UK.country }}
                                            </div>
                                        </div>
                                    </div>
                                }
        
                                <div class="alert bg-slate-900 border border-warning text-warning mt-3 mb-0" role="alert">
                                    <i class="bi bi-exclamation-triangle-fill"></i>
                                    &nbsp;<strong>{{ tr('Note:', 'Nota:') }}</strong> &nbsp;{{ tr('Processing time for mailed books is 5-7 business days after receipt.', 'El tiempo de procesamiento para libros enviados por correo es de 5 a 7 d√≠as h√°biles despu√©s de recibirlos.') }}
                                </div>
                            </div>
                        }
        
                        <!-- 
                            File upload (if digital selected) 
                        -->
                        @if (uploadMethod === 'digital') {
                            <div class="bg-slate-800 rounded-4 p-4 text-center mb-3">
                                @if (!uploadedFile) {
                                    <div class="py-4">
                                        <div class="mb-3" style="font-size: 3rem;">üìÑ</div>
                                        <h6 class="fw-bold mb-2">{{ tr('Upload Your Book', 'Sube Tu Libro') }}</h6>
                                        <p class="small text-gray-400 mb-3">
                                            {{ tr('Supported formats: PDF, TXT (Max 100MB)', 'Formatos compatibles: PDF, TXT (M√°x. 100MB)') }}
                                        </p>
                                        <input type="file" 
                                               #fileInput 
                                               accept=".pdf,.txt" 
                                               (change)="onFileSelected($event)"
                                               style="display: none;">
                                        <button class="btn btn-primary rounded-pill px-5" (click)="fileInput.click()">
                                            <i class="bi bi-upload"></i> {{ tr('Choose File', 'Elegir Archivo') }}
                                        </button>
                                    </div>
                                } @else {
                                    <div class="bg-secondary rounded-3 p-3">
                                        <div class="d-flex align-items-center gap-3">
                                            <i class="bi bi-file-earmark-text-fill text-primary" style="font-size: 2rem;"></i>
                                            <div class="flex-grow-1 text-start">
                                                <div class="fw-semibold">{{ uploadedFile.name }}</div>
                                                <div class="small text-gray-400">{{ formatFileSize(uploadedFile.size) }}</div>
                                            </div>
                                            <button class="btn btn-sm btn-secondary rounded-circle" (click)="removeFile()">
                                                <i class="bi bi-x-lg"></i>
                                            </button>
                                        </div>
                                    </div>
                                }
                            </div>
                        }
        
                        <div class="d-flex gap-3">
                            <button class="btn btn-secondary btn-lg rounded-pill px-5" (click)="prevStep()">
                                <i class="bi bi-arrow-left"></i> {{ tr('Back', 'Atr√°s') }}
                            </button>
                            <button class="btn btn-primary btn-lg rounded-pill px-5 flex-grow-1" 
                                    [disabled]="!canProceedFromStep2()"
                                    (click)="nextStep()">
                                {{ tr('Continue', 'Continuar') }} <i class="bi bi-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                }
        
                <!-- STEP 3: BOOK COVER -->
                @if (currentStep() === 3) {
                    <div class="mt-4 fade-in-up">
                        <h5 class="fw-bold mb-4">
                            {{ tr('Upload Your Book Cover', 'Sube la Portada de Tu Libro') }}
                        </h5>
                        <div class="bg-slate-800 rounded-4 p-4 text-center mb-3">
                            @if (!coverFile) {
                                <div class="py-4">
                                    <div class="mb-3" style="font-size: 3rem;">üñºÔ∏è</div>
                                    <h6 class="fw-bold mb-2">{{ tr('Add a Cover Image', 'Agrega una Imagen de Portada') }}</h6>
                                    <p class="small text-gray-400 mb-3">
                                        {{ tr('Supported formats: JPG, PNG (Recommended 1400x1400)', 'Formatos compatibles: JPG, PNG (Recomendado 1400x1400)') }}
                                    </p>
                                    <input type="file"
                                           #coverInput
                                           accept="image/*"
                                           (change)="onCoverSelected($event)"
                                           style="display: none;">
                                    <button class="btn btn-primary rounded-pill px-5" (click)="coverInput.click()">
                                        <i class="bi bi-upload"></i> {{ tr('Choose Cover', 'Elegir Portada') }}
                                    </button>
                                </div>
                            } @else {
                                <div class="bg-secondary rounded-3 p-3">
                                    <div class="d-flex align-items-center gap-3">
                                        <i class="bi bi-image-fill text-primary" style="font-size: 2rem;"></i>
                                        <div class="flex-grow-1 text-start">
                                            <div class="fw-semibold">{{ coverFile.name }}</div>
                                            <div class="small text-gray-400">{{ formatFileSize(coverFile.size) }}</div>
                                        </div>
                                        <button class="btn btn-sm btn-secondary rounded-circle" (click)="removeCoverFile()">
                                            <i class="bi bi-x-lg"></i>
                                        </button>
                                    </div>
                                </div>
                            }
                        </div>
    
                        <div class="d-flex gap-3">
                            <button class="btn btn-secondary btn-lg rounded-pill px-5" (click)="prevStep()">
                                <i class="bi bi-arrow-left"></i> {{ tr('Back', 'Atr√°s') }}
                            </button>
                            <button class="btn btn-primary btn-lg rounded-pill px-5 flex-grow-1"
                                    [disabled]="!canProceedFromStep3()"
                                    (click)="nextStep()">
                                {{ tr('Continue', 'Continuar') }} <i class="bi bi-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                }
    
                <!-- STEP 4: BOOK DETAILS & VOICE CONFIGURATION -->
                @if (currentStep() === 4) {
                    <div class="mt-4 fade-in-up">                
                        <h3 class="fw-bold mb-4">
                            {{ tr('Configure Your Audiobook', 'Configura Tu Audiolibro') }}
                        </h3>
                        <!-- 
                            Source Language 
                        -->
                        <div class="mb-4">
                            <label class="contact-label">
                                {{ tr('Source Language', 'Idioma de Origen') }}
                            </label>
                            <div class="small text-gray-400 mt-1 mb-1">
                                {{ tr('The language your book is written in', 'El idioma en el que est√° escrito tu libro') }}
                            </div>
                            <select class="contact-input" [(ngModel)]="bookConfig.sourceLanguage" (change)="calculateTranslationCost()">
                                <option value="">{{ tr('Select language...', 'Selecciona un idioma...') }}</option>
                                @for (lang of availableLanguages; track lang.code) {
                                    <option [value]="lang.code">{{ lang.flag }} {{ lang.name }}</option>
                                }
                            </select>
                        </div>
                        <!-- 
                            Target Language 
                        -->
                        <div class="mb-4">
                            <label class="contact-label">
                                {{ tr('Target Language (Optional)', 'Idioma de Destino (Opcional)') }}
                            </label>
                            <div class="small text-gray-400 mt-1 mb-1">
                                {{ tr('Translate and narrate in a different language', 'Traduce y narra en otro idioma') }}
                            </div>
                            <select class="contact-input" [(ngModel)]="bookConfig.targetLanguage" (change)="calculateTranslationCost()">
                                <option value="">{{ tr('Same as source', 'Igual que origen') }}</option>
                                @for (lang of availableLocales; track lang.code) {
                                    <option [value]="lang.code">{{ getLocaleLabel(lang.code) }}</option>
                                }
                            </select>
                            @if (isTranslationEnabled()) {
                                @if (!translation.useFixedPrice) {
                                    <div class="alert bg-slate-800 border border-primary text-primary mt-2 mb-0 small">
                                        <i class="bi bi-info-circle-fill"></i> 
                                        {{ tr('Translation adds', 'La traducci√≥n agrega') }} +{{ selectedCurrency() }}{{ TRANSLATION_PRICE_PER_WORD }} {{ tr('per word', 'por palabra') }}
                                    </div>
                                }
                            }
                        </div>
                        <!-- 
                            Voice Selection 
                        -->
                        <div class="mb-4">
                            <h3>
                                {{ tr('Voices', 'Voces') }}
                            </h3>
                            <p class="text-gray-400 mb-3">
                                {{ tr('Pick a voice for your audiobook', 'Elige una voz para tu audiolibro') }}
                            </p>
                            <div class="row g-3" [class.included-voices-limit]="!includedVoicesShowMore()">
                                @for (voice of availableVoices(); track voice.id) {
                                    <div class="col-6">
                                        <div class="bg-secondary rounded-4 p-3 pointer position-relative"
                                             [class.border]="bookConfig.voiceId === voice.id"
                                             [class.border-primary]="bookConfig.voiceId === voice.id"
                                             [class.border-2]="bookConfig.voiceId === voice.id"
                                             (click)="selectVoice(voice.id, voice.name)">
                                            <div class="d-flex justify-content-between align-items-start mb-2">
                                                <div>
                                                    <div class="fw-bold">{{ voice.name }}</div>
                                                    <div class="small text-gray-400">{{ voice.labels?.gender }} ‚Ä¢ {{ voice.labels?.accent }}</div>
                                                </div>
                                                @if (bookConfig.voiceId === voice.id) {
                                                    <i class="bi bi-check-circle-fill text-primary"></i>
                                                }
                                            </div>
                                            @if (voice.previewUrl) {
                                                <button class="btn btn-sm btn-secondary rounded-pill w-100" (click)="playVoiceSample($event, voice.previewUrl)">
                                                    <i class="bi bi-play-fill"></i> {{ tr('Preview', 'Escuchar') }}
                                                </button>
                                            }
                                        </div>
                                    </div>
                                }
                            </div>
                            @if (!includedVoicesShowMore()) {
                                <div class="mt-4 p-3 text-center">
                                    <button class="btn btn-secondary rounded-pill" (click)="toggleShowMoreIncludedVouces()">
                                        {{ tr('Show more voices', 'Mostrar m√°s voces') }}
                                    </button>
                                </div>
                            }
                            <!--
                                Button to see Premium Voices
                            -->
                            @if (!premiumVoicesShowMore()) {
                                <div class="text-center mt-3">
                                    <button class="btn btn-primary rounded-pill" (click)="toggleShowPremiumVoices()">
                                        <i class="bi bi-stars"></i> {{ tr('View Premium Voices', 'Ver Voces Premium') }} 
                                        (+{{ selectedCurrency() }}{{ SELECTED_PREMIUM_VOICE_COST() }})
                                    </button>
                                </div>
                            }
                            <!--
                                Premium Voices List
                            -->
                            @if (showPremiumVoices()) {
                                <div class="mt-4 mb-5 p-4 bg-slate-800 rounded-4 border-primary-2x">                        
                                    <h3>{{ tr('Premium Voices', 'Voces Premium') }}</h3>
                                    <p class="text-gray-400 mb-3">
                                        {{ tr('You can pick any of these voices at extra cost', 'Puedes elegir cualquiera de estas voces con costo adicional') }}
                                    </p>
                                    <div class="row g-3" [class.included-voices-limit]="!premiumVoicesShowMore()">
                                        @for (voice of premiumVoices(); track voice.id) {
                                            <div class="col-6">
                                                <div class="bg-secondary rounded-4 p-3 pointer position-relative"
                                                    [class.border]="bookConfig.voiceId === voice.id"
                                                    [class.border-primary]="bookConfig.voiceId === voice.id"
                                                    [class.border-2]="bookConfig.voiceId === voice.id"
                                                    (click)="selectVoice(voice.id, voice.name, true)">
                                                    <div class="d-flex justify-content-between align-items-start mb-2">
                                                        <div>
                                                            <div class="fw-bold">{{ voice.name }}</div>
                                                            <div class="small text-gray-400">{{ voice.labels?.gender }} ‚Ä¢ {{ voice.labels?.accent }}</div>
                                                        </div>
                                                        @if (bookConfig.voiceId === voice.id) {
                                                            <i class="bi bi-check-circle-fill text-primary"></i>
                                                        }
                                                    </div>
                                                    @if (voice.previewUrl) {
                                                        <button class="btn btn-sm btn-secondary rounded-pill w-100" (click)="playVoiceSample($event, voice.previewUrl)">
                                                            <i class="bi bi-play-fill"></i> {{ tr('Preview', 'Escuchar') }}
                                                        </button>
                                                    }
                                                </div>
                                            </div>
                                        }
                                    </div>
                                    @if (!premiumVoicesShowMore()) {
                                        <div class="mt-4 text-center">
                                            <button class="btn btn-secondary rounded-pill" (click)="toggleShowMorePremiumVouces()">
                                                {{ tr('Show more voices', 'Mostrar m√°s voces') }}
                                            </button>
                                        </div>
                                    }
                                </div>
                            }
                        </div>
        
                        <!-- 
                            Expression Settings 
                        -->
                        <div class="mb-4">
                            <div class="mt-4 bg-secondary rounded-4 p-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <h3>
                                        {{ tr('Voice Expression', 'Expresi√≥n de Voz') }}
                                    </h3>
                                    <span class="rounded-3 bg-slate-800 text-warning px-3 py-1">
                                        +{{ selectedCurrency() }}{{ SELECTED_VOICE_EXPRESSION_COST() }}
                                    </span>
                                </div>
                                <div class="mt-3 form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="expressionToggle" [(ngModel)]="bookConfig.useExpression">
                                    <label class="form-check-label" for="expressionToggle">
                                        {{ tr('Enable emotional expression and natural intonation', 'Habilitar expresi√≥n emocional y entonaci√≥n natural') }}
                                    </label>
                                    <div class="text-gray-400 mt-2">
                                        {{ tr('Creates more dynamic and engaging narration with varied emotions', 'Crea una narraci√≥n m√°s din√°mica y atractiva con emociones variadas') }}
                                    </div>
                                </div>
                            </div>
                        </div>
        
                        <!-- 
                            Advanced Options 
                        -->
                        <div class="mb-4">
                            <button class="btn btn-link text-primary p-0" (click)="showAdvanced = !showAdvanced">
                                <i class="bi" [class.bi-chevron-down]="!showAdvanced" [class.bi-chevron-up]="showAdvanced"></i>
                                {{ tr('Advanced Options', 'Opciones Avanzadas') }}
                            </button>
                            
                            @if (showAdvanced) {
                                <div class="mt-3">
                                    <!-- Speech Rate -->
                                    <div class="mb-4">
                                        <label class="contact-label">
                                            {{ tr('Speech Rate', 'Velocidad de Habla') }}
                                        </label>
                                        <select class="contact-input" [(ngModel)]="bookConfig.speechRate">
                                            <option value="0.75">{{ tr('Slow (0.75x)', 'Lento (0.75x)') }}</option>
                                            <option value="1.0" selected>{{ tr('Normal (1.0x)', 'Normal (1.0x)') }}</option>
                                            <option value="1.25">{{ tr('Fast (1.25x)', 'R√°pido (1.25x)') }}</option>
                                        </select>
                                    </div>
        
                                    <!-- Stability -->
                                    <div class="mb-4">
                                        <label class="contact-label">
                                            {{ tr('Voice Stability', 'Estabilidad de Voz') }}
                                        </label>
                                        <input type="range" class="form-range" min="0" max="100" [(ngModel)]="bookConfig.stability">
                                        <div class="d-flex justify-content-between small text-gray-400">
                                            <span>{{ tr('More Variable', 'M√°s Variable') }}</span>
                                            <span>{{ bookConfig.stability }}%</span>
                                            <span>{{ tr('More Stable', 'M√°s Estable') }}</span>
                                        </div>
                                    </div>
        
                                    <!-- Clarity -->
                                    <div class="mb-4">
                                        <label class="contact-label">
                                            {{ tr('Clarity + Similarity', 'Claridad + Similitud') }}
                                        </label>
                                        <input type="range" class="form-range" min="0" max="100" [(ngModel)]="bookConfig.clarity">
                                        <div class="d-flex justify-content-between small text-gray-400">
                                            <span>{{ tr('More Similar', 'M√°s Similar') }}</span>
                                            <span>{{ bookConfig.clarity }}%</span>
                                            <span>{{ tr('More Clear', 'M√°s Clara') }}</span>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
        
                        <!-- 
                            Book Metadata 
                        -->
                        <div class="bg-slate-800 rounded-4 p-4 mb-4">                    
                            <h3 class="fw-bold mb-3">
                                {{ tr('Book Information', 'Informaci√≥n del Libro') }}
                            </h3>                    
                            <div class="mb-3">
                                <label class="text-gray-400">{{ tr('Title', 'T√≠tulo') }}</label>
                                <input type="text" 
                                       class="contact-input"
                                       [placeholder]="tr('Enter book title...', 'Ingresa el t√≠tulo del libro...')"
                                       [(ngModel)]="bookConfig.title">
                            </div>
                            <div class="mb-3">
                                <label class="text-gray-400">{{ tr('Author Name', 'Nombre del Autor') }}</label>
                                <input type="text" 
                                       class="contact-input"
                                       [placeholder]="tr('Enter author name...', 'Ingresa el nombre del autor...')"
                                       [(ngModel)]="bookConfig.authorName">
                            </div>
                            <div class="mb-3">
                                <label class="text-gray-400">{{ tr('Description', 'Descripci√≥n') }}</label>
                                <textarea class="contact-input"
                                          rows="3"
                                          [placeholder]="tr('Brief description of your book...', 'Breve descripci√≥n de tu libro...')"
                                          [(ngModel)]="bookConfig.description"></textarea>
                            </div>
                            <div class="mb-3">
                                <div class="d-flex justify-content-between align-items-center gap-3">
                                    <label class="contact-label">
                                        {{ tr('Categories', 'Categor√≠as') }} <span class="text-gray-400">({{ tr('Select up to 3', 'Selecciona hasta 3') }})</span>
                                    </label>
                                    @if (!showAllCategories()) {
                                        <button class="btn btn-sm btn-dark rounded-pill px-3" (click)="toggleShowAllCategories()">
                                            {{ tr('Show all', 'Mostrar todo') }}
                                        </button>
                                    }    
                                </div>
                                <div class="mt-3 d-flex flex-wrap gap-2" [class.included-category-limit]="!showAllCategories()">
                                    @for (category of availableCategories; track category) {
                                        <button class="btn rounded-pill"
                                                [class.btn-primary]="bookConfig.categories.includes(category)"
                                                [class.btn-secondary]="!bookConfig.categories.includes(category)"
                                                (click)="toggleCategory(category)">
                                            {{ category }}
                                        </button>
                                    }
                                </div>
                            </div>
                        </div>
        
                        <!-- 
                            Cost Summary 
                        -->
                        <div class="bg-secondary rounded-4 p-4 mb-4">
                            <h3 class="fw-bold mb-3">
                                {{ tr('Cost Summary', 'Resumen de Costos') }}
                            </h3>
                            <div class="d-flex justify-content-between mb-2">
                                <span class="text-gray-400">{{ tr('Base Price', 'Precio Base') }}</span>
                                <span class="fw-semibold">${{ calculateBasePrice() }}</span>
                            </div>
                            @if (bookConfig.useExpression) {
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-gray-400">{{ tr('Voice Expression', 'Expresi√≥n de Voz') }}</span>
                                    <span class="fw-semibold">+${{ selectedCurrency() }}{{ SELECTED_VOICE_EXPRESSION_COST() }}</span>
                                </div>
                            }
                            @if (isVoiceProfessional()) {
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-gray-400">{{ tr('Premium Voice', 'Voz Premium') }}</span>
                                    <span class="fw-semibold">+$20</span>
                                </div>
                            }
                            @if (isTranslationEnabled()) {
                                <div class="d-flex justify-content-between mb-2">
                                    <span class="text-gray-400">{{ tr('Translation', 'Traducci√≥n') }}</span>
                                    <span class="fw-semibold">+{{ selectedCurrency() }}{{ totalTranslation()}}</span>
                                </div>
                            }
                            <hr style="border-color: rgba(255,255,255,0.1);">
                            <div class="d-flex justify-content-between">
                                <span class="fw-bold">{{ tr('Total', 'Total') }}</span>
                                <span class="fw-bold text-primary text-2xl">${{ calculateTotalPrice() }}</span>
                            </div>
                            @if (referralValid()) {
                                <div class="text-center mt-3">
                                    <span class="badge bg-success px-4 py-2">
                                        <i class="bi bi-check-circle-fill"></i> {{ tr('FREE with referral code!', '¬°GRATIS con c√≥digo de referido!') }}
                                    </span>
                                </div>
                            }
                        </div>
        
                        <div class="d-flex gap-3">
                            <button class="btn btn-secondary btn-lg rounded-pill px-5" (click)="prevStep()">
                                <i class="bi bi-arrow-left"></i> {{ tr('Back', 'Atr√°s') }}
                            </button>
                            <button class="btn btn-primary btn-lg rounded-pill px-5 flex-grow-1" [disabled]="!canProceedFromStep4()" (click)="nextStep()">
                                {{ tr('Review', 'Revisar') }} <i class="bi bi-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                }
    
                <!-- STEP 5: REVIEW & SUBMIT -->
                @if (currentStep() === 5) {
                    <div class="mt-4 fade-in-up">
                        <h3 class="fw-bold mb-4">
                            {{ tr('Review Your Submission', 'Revisa Tu Env√≠o') }}
                        </h3>
                        <!-- 
                            Upload Summary 
                        -->
                        <div class="bg-secondary rounded-4 p-4 mb-3">
                            <h3 class="fw-semibold mb-3">
                                {{ tr('Upload Method', 'M√©todo de Env√≠o') }}
                            </h3>
                            @if (uploadMethod === 'digital') {
                                <div class="d-flex align-items-center gap-3">
                                    <i class="bi bi-cloud-upload-fill text-primary" style="font-size: 2rem;"></i>
                                    <div>
                                        <div class="fw-semibold">{{ uploadedFile?.name }}</div>
                                        <div class="small text-gray-400">{{ formatFileSize(uploadedFile?.size || 0) }}</div>
                                    </div>
                                </div>
                            } @else {
                                <div class="d-flex align-items-center gap-3">
                                    <i class="bi bi-mailbox text-primary" style="font-size: 2rem;"></i>
                                    <div>
                                        <div class="fw-semibold">{{ tr('Physical Mail', 'Correo F√≠sico') }}</div>
                                        <div class="small text-gray-400">{{ tr('Please send to the provided address', 'Por favor env√≠a al domicilio indicado') }}</div>
                                    </div>
                                </div>
                            }
                        </div>
        
                        <!-- 
                            Cover Summary 
                        -->
                        <div class="bg-secondary rounded-4 p-4 mb-3">
                            <h3 class="fw-semibold mb-3">
                                {{ tr('Cover Image', 'Imagen de Portada') }}
                            </h3>
                            @if (coverFile) {
                                <div class="d-flex align-items-center gap-3">
                                    <i class="bi bi-image-fill text-primary" style="font-size: 2rem;"></i>
                                    <div>
                                        <div class="fw-semibold">{{ coverFile.name }}</div>
                                        <div class="small text-gray-400">{{ formatFileSize(coverFile.size) }}</div>
                                    </div>
                                </div>
                            } @else {
                                <div class="small text-gray-400">
                                    {{ tr('No cover selected', 'No se seleccion√≥ portada') }}
                                </div>
                            }
                        </div>
        
                        <!-- 
                            Book Details Summary 
                        -->
                        <div class="bg-secondary rounded-4 p-4 mb-3">
                            <h3 class="fw-semibold mb-3">
                                {{ tr('Book Details', 'Detalles del Libro') }}
                            </h3>
                            <div class="row g-3">
                                <div class="col-6">
                                    <div class="small text-gray-400">{{ tr('Title', 'T√≠tulo') }}</div>
                                    <div class="fw-semibold">{{ bookConfig.title }}</div>
                                </div>
                                <div class="col-6">
                                    <div class="small text-gray-400">{{ tr('Author', 'Autor') }}</div>
                                    <div class="fw-semibold">{{ bookConfig.authorName }}</div>
                                </div>
                                <div class="col-12">
                                    <div class="small text-gray-400">{{ tr('Categories', 'Categor√≠as') }}</div>
                                    <div class="d-flex gap-2 mt-1">
                                        @for (cat of bookConfig.categories; track cat) {
                                            <span class="bg-primary px-3 py-1 rounded-3">{{ cat }}</span>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
        
                        <!-- 
                            Voice Configuration Summary 
                        -->
                        <div class="bg-secondary rounded-4 p-4 mb-3">
                            <h3 class="fw-semibold mb-3">
                                {{ tr('Voice Configuration', 'Configuraci√≥n de Voz') }}
                            </h3>
                            <div class="row g-3">
                                <div class="col-6">
                                    <div class="small text-gray-400">{{ tr('Language', 'Idioma') }}</div>
                                    <div class="fw-semibold">{{ getLanguageName(bookConfig.sourceLanguage) }}</div>
                                </div>
                                <div class="col-6">
                                    <div class="small text-gray-400">{{ tr('Voice', 'Voz') }}</div>
                                    <div class="fw-semibold">{{ bookConfig.voiceName }}</div>
                                </div>
                                <div class="col-12">
                                    <div class="d-flex gap-2">
                                        @if (bookConfig.useExpression) {
                                            <span class="bg-slate-800 px-3 py-1 rounded-3">
                                                <i class="bi bi-emoji-smile"></i> {{ tr('Expression Enabled', 'Expresi√≥n Activada') }}
                                            </span>
                                        }
                                        @if (isTranslationEnabled()) {
                                            <span class="bg-slate-800 px-3 py-1 rounded-3">
                                                <i class="bi bi-translate"></i> {{ tr('Translating to', 'Traduciendo a') }} {{ getLanguageName(bookConfig.targetLanguage) }}
                                            </span>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
        
                        <!-- 
                            Final Price 
                        -->
                        <div class="bg-slate-800 rounded-4 p-4 mb-4 text-center border border-2"
                             [class.border-success]="referralValid()"
                             [class.border-primary]="!referralValid()">
                            <h3 class="fw-bold mb-2">
                                {{ tr('Total Cost', 'Costo Total') }}
                            </h3>
                            @if (referralValid() && calculateTotalPrice() === 0) {
                                <div class="text-success" style="font-size: 3rem; font-weight: 700;">{{ tr('FREE', 'GRATIS') }}</div>
                                <div class="small text-gray-400">{{ tr('Referral code applied', 'C√≥digo de referido aplicado') }}</div>
                            } @else if (referralValid() && calculateTotalPrice() > 0) {
                                <div class="text-warning" style="font-size: 3rem; font-weight: 700;">${{ calculateTotalPrice() }}</div>
                                <div class="small text-gray-400">
                                    <div class="text-success mb-1">{{ tr('Base price: FREE (Referral applied)', 'Precio base: GRATIS (Referido aplicado)') }}</div>
                                    <div>{{ tr('Premium features:', 'Funciones premium:') }} ${{ calculateTotalPrice() }}</div>
                                </div>
                            } @else {
                                <div class="text-primary" style="font-size: 3rem; font-weight: 700;">${{ calculateTotalPrice() }}</div>
                                <div class="small text-gray-400">{{ tr('One-time payment', 'Pago √∫nico') }}</div>
                            }
                        </div>
        
                        <!-- 
                            Terms & Conditions 
                        -->
                        <div class="bg-secondary rounded-4 p-4 mb-4">
                            <div class="form-check">
                                <input class="form-check-input" 
                                       type="checkbox" 
                                       id="termsCheck"
                                       [(ngModel)]="acceptedTerms">
                                <label class="form-check-label" for="termsCheck">
                                    {{ tr('I have read and agree to the', 'He le√≠do y acepto los') }} 
                                    <a href="#" class="text-primary" (click)="showTerms($event)">{{ tr('Terms & Conditions', 'T√©rminos y Condiciones') }}</a>
                                </label>
                            </div>
                        </div>
        
                        <div class="d-flex gap-3">
                            <button class="btn btn-secondary btn-lg rounded-pill px-5" (click)="prevStep()">
                                <i class="bi bi-arrow-left"></i> {{ tr('Back', 'Atr√°s') }}
                            </button>
                            <button class="btn btn-primary btn-lg rounded-pill px-5 flex-grow-1" 
                                    [disabled]="!acceptedTerms"
                                    (click)="submitUpload()">
                                <i class="bi bi-check-circle-fill"></i> {{ tr('Submit', 'Enviar') }}
                            </button>
                        </div>
                    </div>
                }
    
                <!-- SUCCESS STATE -->
                @if (currentStep() === 6) {
                    <div class="mt-5 text-center fade-in-up">
                        <div class="mb-4" style="font-size: 5rem;">‚úÖ</div>
                        <h3 class="fw-bold mb-3">{{ tr('Thank You!', '¬°Gracias!') }}</h3>
                        <p class="text-gray-400 mb-4" style="max-width: 500px; margin: 0 auto;">
                            {{ tr('Your book has been submitted successfully. Our team of expert humans will personally review and process your audiobook to ensure the highest quality output.', 'Tu libro se envi√≥ con √©xito. Nuestro equipo de expertos revisar√° y procesar√° tu audiolibro para asegurar la mejor calidad posible.') }}
                        </p>
                        
                        <div class="bg-slate-800 rounded-4 p-4 mb-4" style="max-width: 500px; margin: 0 auto;">
                            <h6 class="fw-bold mb-3">{{ tr('What Happens Next?', '¬øQu√© Sigue?') }}</h6>
                            <div class="d-flex align-items-start gap-3 mb-3 text-start">
                                <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center flex-shrink-0"
                                     style="width: 32px; height: 32px; font-size: 0.875rem;">
                                    1
                                </div>
                                <div>
                                    <div class="fw-semibold small">{{ tr('Quality Check', 'Control de Calidad') }}</div>
                                    <div class="small text-gray-400">{{ tr('Our team reviews your submission', 'Nuestro equipo revisa tu env√≠o') }}</div>
                                </div>
                            </div>
                            <div class="d-flex align-items-start gap-3 mb-3 text-start">
                                <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center flex-shrink-0"
                                     style="width: 32px; height: 32px; font-size: 0.875rem;">
                                    2
                                </div>
                                <div>
                                    <div class="fw-semibold small">{{ tr('AI Processing', 'Procesamiento con IA') }}</div>
                                    <div class="small text-gray-400">{{ tr('Your book is converted to audio', 'Tu libro se convierte en audio') }}</div>
                                </div>
                            </div>
                            <div class="d-flex align-items-start gap-3 text-start">
                                <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center flex-shrink-0"
                                     style="width: 32px; height: 32px; font-size: 0.875rem;">
                                    3
                                </div>
                                <div>
                                    <div class="fw-semibold small">{{ tr('Publication', 'Publicaci√≥n') }}</div>
                                    <div class="small text-gray-400">{{ tr("We'll notify you via app & email", 'Te notificaremos por la app y por email') }}</div>
                                </div>
                            </div>
                        </div>
        
                        @if (showNextStepsAfterUploadingBook()) {
                            <div class="d-flex gap-3 justify-content-center">
                                <button class="btn btn-secondary rounded-pill px-5" (click)="goToMyBooks()">
                                    {{ tr('View My Books', 'Ver Mis Libros') }}
                                </button>
                                <button class="btn btn-primary rounded-pill px-5" (click)="uploadAnother()">
                                    {{ tr('Upload Another', 'Subir Otro') }}
                                </button>
                            </div>
                        }
                        
                    </div>
                }
        
            </div>
        </div>

    }

</div>

<!-- 
    Partners Modal 
-->
@if (showPartnersModal()) {
    <div class="modal fade show d-block px-4" style="background-color: rgba(0,0,0,0.8);" (click)="closePartners()">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" (click)="$event.stopPropagation()">
            <div class="modal-content bg-secondary">
                <div class="modal-header border-0">
                    <h5 class="modal-title text-light fw-bold">{{ tr('Our Partners', 'Nuestros Socios') }}</h5>
                    <button type="button" class="btn-close btn-close-white" (click)="closePartners()"></button>
                </div>
                <div class="modal-body">
                    <p class="text-gray-400 mb-4">
                        {{ tr('Get a referral code from any of our trusted partners to upload your book for free!', 'Obt√©n un c√≥digo de referido de cualquiera de nuestros socios de confianza para subir tu libro gratis.') }}
                    </p>
                    
                    @for (partner of partners(); track partner.name) {
                        <div class="bg-slate-800 rounded-4 p-3 mb-3">
                            <div class="d-flex justify-content-between align-items-start">
                                <div>
                                    <h6 class="fw-bold text-light mb-1">
                                        {{ partner.name }}
                                    </h6>
                                    <p class="small text-gray-400 mb-0 overflow-hidden" style="max-height: 100px;">
                                        {{ partner.description }}
                                    </p>
                                </div>
                                <a [href]="partner.website" target="_blank" class="btn btn-sm btn-primary rounded-pill px-3">
                                    <h5 class="m-0">
                                        <i class="bi bi-box-arrow-up-right"></i>
                                    </h5>
                                </a>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
}

<!-- 
    Terms Modal 
-->
@if (showTermsModal) {
    <div class="modal fade show d-block px-4" style="background-color: rgba(0,0,0,0.8);" (click)="closeTerms()">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg" (click)="$event.stopPropagation()">
            <div class="modal-content bg-secondary">
                <div class="modal-header border-0">
                    <h5 class="modal-title fw-bold text-light">{{ tr('Terms & Conditions', 'T√©rminos y Condiciones') }}</h5>
                    <button type="button" class="btn-close btn-close-white" (click)="closeTerms()"></button>
                </div>
                <div class="modal-body">
                    <app-terms-text></app-terms-text>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-primary rounded-pill px-4" (click)="acceptTermsFromModal()">
                        {{ tr('I Agree', 'Estoy de Acuerdo') }}
                    </button>
                </div>
            </div>
        </div>
    </div>
}

<!-- 
    PAYMENT WAITING MODAL
-->
@if (showPaymentWaiting()) {
    <div class="modal fade show d-block px-4" style="background-color: rgba(0,0,0,0.9);">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-secondary">
                <div class="modal-body text-center py-5">
                    <div class="spinner-border text-primary mb-4" role="status" style="width: 4rem; height: 4rem;">
                        <span class="visually-hidden">{{ tr('Loading...', 'Cargando...') }}</span>
                    </div>
                    <h4 class="fw-bold mb-3 text-light">{{ tr('Waiting for Payment', 'Esperando el Pago') }}</h4>
                    <p class="text-gray-400 mb-4">
                        {{ tr('Please complete your payment in the Stripe window.', 'Completa tu pago en la ventana de Stripe.') }}<br>
                        {{ tr('This page will automatically update when payment is confirmed.', 'Esta p√°gina se actualizar√° autom√°ticamente cuando el pago se confirme.') }}
                    </p>
                    <div class="d-flex flex-wrap justify-content-center align-items-center gap-3">
                        <button type="button" class="btn btn-outline-secondary rounded-pill px-4" (click)="cancelPaymentWaiting()">
                            {{ tr('Cancel', 'Cancelar') }}
                        </button>
                        <button type="button" class="btn btn-outline-primary rounded-pill px-4" (click)="cancelPaymentWaitingAndTryAgain()">
                            {{ tr('Try again', 'Intentar de nuevo') }}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

<div style="height: 5rem;"></div>
